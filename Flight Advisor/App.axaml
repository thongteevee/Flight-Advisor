<Application xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="using:FlightAdvisor"
             xmlns:conv="using:FlightAdvisor.Converters"
             xmlns:sty="using:FluentAvalonia.Styling"
             x:Class="FlightAdvisor.App"
             RequestedThemeVariant="Dark"
             Name="App">

	<Application.Resources>
		<!-- Register Converters -->
		<conv:DecisionToColorConverter x:Key="DecisionToColorConverter"/>
		<conv:DecisionToTextConverter x:Key="DecisionToTextConverter"/>
		<conv:CountToBoolConverter x:Key="CountToBoolConverter"/>
		<conv:BoolToExpandIconConverter x:Key="BoolToExpandIconConverter"/>
		<conv:BoolToChevronConverter x:Key="BoolToChevronConverter"/>
		<conv:BoolToThemeIconConverter x:Key="BoolToThemeIconConverter"/>
		<conv:BoolToThemeTextConverter x:Key="BoolToThemeTextConverter"/>

		<!-- Dynamic Color Resources -->
		<!-- Dark Theme Colors -->
		<Color x:Key="DarkBackground">#0a0e1a</Color>
		<Color x:Key="DarkBackground2">#1e293b</Color>
		<Color x:Key="DarkSurface">#0f172a</Color>
		<Color x:Key="DarkBorder">#334155</Color>
		<Color x:Key="DarkText">#e0e7ff</Color>
		<Color x:Key="DarkTextSecondary">#c7d2fe</Color>
		<Color x:Key="DarkTextTertiary">#94a3b8</Color>

		<!-- Light Theme Colors -->
		<Color x:Key="LightBackground">#f8fafc</Color>
		<Color x:Key="LightBackground2">#e2e8f0</Color>
		<Color x:Key="LightSurface">#ffffff</Color>
		<Color x:Key="LightBorder">#cbd5e1</Color>
		<Color x:Key="LightText">#0f172a</Color>
		<Color x:Key="LightTextSecondary">#334155</Color>
		<Color x:Key="LightTextTertiary">#64748b</Color>
	</Application.Resources>

	<Application.Styles>
		<!-- FluentAvalonia Theme -->
		<sty:FluentAvaloniaTheme PreferSystemTheme="False"
                                 PreferUserAccentColor="False"/>

		<!-- Additional Styles -->
		<StyleInclude Source="avares://Avalonia.Controls.DataGrid/Themes/Fluent.xaml"/>

		<!-- Dynamic Theme Styles -->
		<Style Selector="Window">
			<Setter Property="Background" Value="{DynamicResource DarkBackground}"/>
		</Style>

		<Style Selector="Window[RequestedThemeVariant=Light]">
			<Setter Property="Background" Value="{DynamicResource LightBackground}"/>
		</Style>

		<!-- Error Display Animations -->
		<Style Selector="Border.error-container">
			<Style.Animations>
				<!-- Fade in and scale up animation -->
				<Animation Duration="0:0:0.4" FillMode="Forward" Easing="CubicEaseOut">
					<KeyFrame Cue="0%">
						<Setter Property="Opacity" Value="0"/>
						<Setter Property="ScaleTransform.ScaleX" Value="0.9"/>
						<Setter Property="ScaleTransform.ScaleY" Value="0.9"/>
						<Setter Property="TranslateTransform.Y" Value="20"/>
					</KeyFrame>
					<KeyFrame Cue="100%">
						<Setter Property="Opacity" Value="1"/>
						<Setter Property="ScaleTransform.ScaleX" Value="1"/>
						<Setter Property="ScaleTransform.ScaleY" Value="1"/>
						<Setter Property="TranslateTransform.Y" Value="0"/>
					</KeyFrame>
				</Animation>
			</Style.Animations>
		</Style>

		<!-- Error Icon Pulse Animation -->
		<Style Selector="Viewbox.error-icon">
			<Style.Animations>
				<Animation Duration="0:0:2" IterationCount="Infinite" Easing="SineEaseInOut">
					<KeyFrame Cue="0%">
						<Setter Property="ScaleTransform.ScaleX" Value="1"/>
						<Setter Property="ScaleTransform.ScaleY" Value="1"/>
						<Setter Property="Opacity" Value="1"/>
					</KeyFrame>
					<KeyFrame Cue="50%">
						<Setter Property="ScaleTransform.ScaleX" Value="1.08"/>
						<Setter Property="ScaleTransform.ScaleY" Value="1.08"/>
						<Setter Property="Opacity" Value="0.85"/>
					</KeyFrame>
					<KeyFrame Cue="100%">
						<Setter Property="ScaleTransform.ScaleX" Value="1"/>
						<Setter Property="ScaleTransform.ScaleY" Value="1"/>
						<Setter Property="Opacity" Value="1"/>
					</KeyFrame>
				</Animation>
			</Style.Animations>
		</Style>

		<!-- Shake Animation for Critical Errors -->
		<Style Selector="Border.error-shake">
			<Style.Animations>
				<Animation Duration="0:0:0.5" FillMode="Forward">
					<KeyFrame Cue="0%">
						<Setter Property="TranslateTransform.X" Value="0"/>
					</KeyFrame>
					<KeyFrame Cue="10%">
						<Setter Property="TranslateTransform.X" Value="-8"/>
					</KeyFrame>
					<KeyFrame Cue="20%">
						<Setter Property="TranslateTransform.X" Value="8"/>
					</KeyFrame>
					<KeyFrame Cue="30%">
						<Setter Property="TranslateTransform.X" Value="-8"/>
					</KeyFrame>
					<KeyFrame Cue="40%">
						<Setter Property="TranslateTransform.X" Value="8"/>
					</KeyFrame>
					<KeyFrame Cue="50%">
						<Setter Property="TranslateTransform.X" Value="-4"/>
					</KeyFrame>
					<KeyFrame Cue="60%">
						<Setter Property="TranslateTransform.X" Value="4"/>
					</KeyFrame>
					<KeyFrame Cue="70%">
						<Setter Property="TranslateTransform.X" Value="0"/>
					</KeyFrame>
				</Animation>
			</Style.Animations>
		</Style>

		<!-- Error Button Hover Effect -->
		<Style Selector="Button.error-action">
			<Setter Property="Transitions">
				<Transitions>
					<TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.2"/>
					<BrushTransition Property="Background" Duration="0:0:0.2"/>
				</Transitions>
			</Setter>
		</Style>

		<Style Selector="Button.error-action:pointerover">
			<Setter Property="RenderTransform" Value="scale(1.05)"/>
		</Style>

		<Style Selector="Button.error-action:pressed">
			<Setter Property="RenderTransform" Value="scale(0.98)"/>
		</Style>

		<!-- Quick Select Button Animation -->
		<Style Selector="Button.quick-select">
			<Setter Property="Transitions">
				<Transitions>
					<BrushTransition Property="Background" Duration="0:0:0.15"/>
					<TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.15"/>
				</Transitions>
			</Setter>
		</Style>

		<Style Selector="Button.quick-select:pointerover">
			<Setter Property="RenderTransform" Value="translateX(4px)"/>
		</Style>
	</Application.Styles>
</Application>